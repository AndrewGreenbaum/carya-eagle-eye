[build]
builder = "dockerfile"
dockerfilePath = "Dockerfile"

[deploy]
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 5
# Run migrations before starting the app
releaseCommand = "python -m alembic upgrade head"
# Time between SIGTERM and SIGKILL - allows graceful scan shutdown
drainingSeconds = 15
# Health check: longer timeout for long-running scans
healthcheckPath = "/health"
healthcheckTimeout = 500

[service]
internalPort = 8000
